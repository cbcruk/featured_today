---
import { Stories } from '@components/Stories'
import Layout from '@layouts/Layout.astro'
import { getStories } from '@lib/collection'
import { getDisplayFormat } from '@lib/date'
import { getCollection } from 'astro:content'

const { date } = Astro.params
const dateCollection = await getCollection('dates')
const dateEntry = dateCollection.find(
  (dateEntry) => dateEntry.data.date === date
)
const stories = await getStories(dateEntry?.id)
---

<Layout title={getDisplayFormat('M월 D일 dddd', date)}>
  <Stories data={stories} />
</Layout>
