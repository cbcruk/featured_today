---
import type { ArtworkEntry, StoryEntry } from '@content/types'
import { getThumbnail } from '@lib/image'
import { getEntry } from 'astro:content'
import { getCollection } from 'astro:content'

type Props = {
  data: StoryEntry['data']
}

const { data: storyData } = Astro.props
const artwork = await getEntry('artworks', storyData.artwork!)
const artworkTextColors = await getCollection(
  'artworkTextColors',
  (artworkTextColor) => artworkTextColor.data.artwork_id === storyData.artwork
)
---

<img src={getThumbnail(artwork?.data.url, '480x633fn')} alt="" />

<pre>{JSON.stringify({
  storyData,
  artwork,
  artworkTextColors
}, null, 2)}</pre>
